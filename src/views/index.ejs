<!DOCTYPE html>
<html lang="en" class="h-100" prefix="og: http://ogp.me/ns#">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" href="/img/new.png" type="image/x-icon">

	<link href="/vendor/bootstrap.css" rel="stylesheet">
	<link href="/vendor/leaflet.css" rel="stylesheet">
	<link href="/css/style.css" rel="stylesheet">

	<title>DigiNodes</title>
</head>

<body class="d-flex flex-column h-100">
	<navbar class="navbar navbar-expand-md navbar-dark bg-dark bg-blue header">
		<div class="container">
			<a class="navbar-brand" href="/">
				<img src="/img/regular.png" height="50">
				<i><span class="h3 align-middle">DigiByte Nodes</span></i>
			</a>
		</div>
	</navbar>

	<main class="container my-3">
		<div class="row justify-content-center mb-3">
			<div class="col-md-8">
				<div class="row justify-content-center">
					<div class="col-md-4" id="count">

					</div>
					<div class="col-md-4" id="countries">

					</div>
				</div>
			</div>
		</div>
		<div class="row justify-content-center mb-3">
			<div class="col-md-8">
				<h1 class="text-center">SubVersions</h1>
				<div class="row">
					<div class="col-md-4">
						<div class="chart-container" style="max-height: 200px;">
							<canvas id="graphSubversions" style="max-height: 200px"></canvas>
						</div>
					</div>
					<div class="col-md-8">
						<div class="table-responsive">
							<table class="table table-striped table-hover">
								<thead>
									<tr>
										<th scope="col">Name</th>
										<th scope="col">Quantity</th>
									</tr>
								</thead>
								<tbody id="tableSubversions">
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row justify-content-center mb-3">
			<div class="col-md-8">
				<h1 class="text-center">World map</h1>
				<div class="row">
					<div class="col-md-4">
						<div class="table-responsive" style="max-height: 300px;">
							<table class="table table-striped table-hover">
								<thead>
									<tr>
										<th scope="col">Country</th>
										<th scope="col">Quantity</th>
									</tr>
								</thead>
								<tbody id="tableCountries">
								</tbody>
							</table>
						</div>
					</div>
					<div class="col-md-8">
						<div id="map" class="img-thumbnail"></div>
					</div>
				</div>
			</div>
		</div>
		<div class="row justify-content-center">
			<div class="col-md-8">
				<h1 class="text-center">Node Tester</h1>
				<div class="row text-justify mb-3">
					<div class="col-md-6">
						If you are running a node use this tool to check if is reachable throug the internet.
					</div>
					<div class="col-md-6">
						The default DigiByte port is 12024 but you can setup and test any port you want!
					</div>
				</div>
				<div class="mb-3">
					<div class="input-group">
						<input type="text" class="form-control" placeholder="IP (v4 or v6)" id="txtIP">
						<span class="input-group-text">:</span>
						<input type="number" class="form-control" placeholder="Port" value="12024" id="txtPort">
						<button class="btn btn-secondary" type="button" id="btnTest">Test</button>
					</div>
					<small>Enter an IP and check if there is a DigiByte Node listening!</small>
				</div>
				<div class="mb-3">
					<div id="loading" class="text-center d-none">
						<div class="spinner-border text-primary" role="status">
							<span class="visually-hidden">Loading...</span>
						</div>
					</div>
					<div id="success" class="d-none">
						<div class="alert alert-success">
							<h4 class="alert-heading">Success!</h4>
							<p>
								We found a DigiByte Node running a <span id="lblVersion"></span> version and <span id="lblSubversion"></span> subversion software!
							</p>
							<hr>
							<p class="mb-0 text-center">The last block reported by the node is <span id="lblHeight"></span></p>
						</div>
					</div>
					<div id="fail" class="d-none">
						<div class="alert alert-danger">
							<h4 class="alert-heading">Fail!</h4>
							<p>
								There is no DigiByte software listening on this IP or it is unreachable
							</p>
							<hr>
							<p class="mb-0 text-center">
								Remember to forward your router's port to your computer!
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row justify-content-center">
			<div class="col-md-8">
				<h1 class="text-center">DigiByte Peers</h1>
				<table class="table">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">Address</th>
							<th scope="col">Port</th>
							<th scope="col">Subversion</th>
							<th scope="col">Version</th>
							<th scope="col">Country</th>
						</tr>
					</thead>
					<tbody id="tablePeers">
					</tbody>
				</table>
			</div>
		</div>
	</main>

	<footer class="footer mt-auto py-3 bg-dark">
		<div class="container text-center" style="color:#FFFFFF;">
			&#169;2022 DigiNodes - Be part of the DigiByte Network
		</div>
	</footer>

	<script src="/vendor/bootstrap.js"></script>
	<script src="/vendor/leaflet.js"></script>
	<script src="/vendor/chart.js"></script>
	<script src="/js/main.js"></script>
	<script src="/js/widget.js"></script>
	<script>
		DigiByteCrawler('count', 'count');
		DigiByteCrawler('countries', 'countries');
	</script>
</body>

</html>